<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>OBSIDIAN WEB</title>

<style id="main-obsidian-styles">
/* ===========================
    Obsidian Theme Variables
   =========================== */
:root {
  --background-primary: #1e1e1e;
  --background-secondary: #2a2a2a;
  --text-normal: #dcdcdc; 
  --text-accent: #a882ff;
  --text-muted: #888;
  --interactive-accent: #a882ff;
  --code-background: #242424;
  --code-normal: #b3b3b3;
  --code-comment: #666666;
  --code-function: #e0de71;
  --code-important: #e9973f;
  --code-keyword: #fa99cd;
  --code-operator: #fb464c;
  --code-property: #53dfdd;
  --code-punctuation: #b3b3b3;
  --code-string: #44cf6e;
  --code-tag: #fb464c;
  --code-value: #a882ff;
}

/*  Light Mode Variables */
.light-mode {
  --background-primary: #f6f6f6;
  --background-secondary: #ffffff;
  --text-normal: #1e1e1e;
  --text-accent: #6c3aff;
  --text-muted: #555;
  --interactive-accent: #6c3aff;
  --code-background: #f0f0f0;
  --code-comment: #999;
  --code-string: #118c4f;
  --code-keyword: #7d4dd3;
  --code-function: #c37e00;
}

/* ===========================
    ê¸°ë³¸ ë ˆì´ì•„ì›ƒ (Layout Fixed)
   =========================== */
body {
  background-color: var(--background-primary);
  color: var(--text-normal);
  font-family: "Inter", "Segoe UI", sans-serif;
  display: flex;
  flex-direction: row;
  height: 100vh;
  margin: 0;
  overflow: hidden;
}

#editor {
  width: 40%;
  padding: 1em;
  background-color: var(--background-secondary);
  border-right: 2px solid var(--interactive-accent);
  resize: none;
  outline: none;
  color: var(--text-normal);
  font-family: "Fira Code", monospace;
  font-size: 14px;
  height: 100%; /* (FIXED) íˆ´ë°” ê³µê°„ í™•ë³´ */
  box-sizing: border-box;
  padding-bottom: 50px;
}

/* (NEW) ì˜¤ë¥¸ìª½ íŒ¨ë„ (ë¯¸ë¦¬ë³´ê¸° + HTML ë·°) */
#right-panel {
  width: 60%;
  display: flex;
  flex-direction: column;
  height: 100vh;
  padding-bottom: 50px; /* (FIXED) íˆ´ë°” ê³µê°„ í™•ë³´ */
  box-sizing: border-box;
}

#preview {
  height: 60%; /* ìƒë‹¨ 60% */
  padding: 2em;
  overflow-y: auto;
}

/* (NEW) HTML ì½”ë“œ ì‹¤ì‹œê°„ ë·° */
/* (NEW) HTML ì½”ë“œ ì‹¤ì‹œê°„ ë·° */
#html-code-view {
  height: 100%; /* (MODIFIED) ë¶€ëª¨ divë¥¼ 100% ì±„ìš°ë„ë¡ ë³€ê²½ */
  box-sizing: border-box; /* (NEW) íŒ¨ë”©ì´ ë†’ì´ì— í¬í•¨ë˜ë„ë¡ ì¶”ê°€ */
  background: var(--code-background);
  color: var(--text-normal);
  border-top: 2px solid var(--interactive-accent);
  padding: 1em;
  margin: 0;
  overflow: auto;
  font-family: "Fira Code", monospace;
  font-size: 13px;
  white-space: pre-wrap; /* ìë™ ì¤„ë°”ê¿ˆ */
  word-break: break-all;
}

/* ===========================
    Markdown ìŠ¤íƒ€ì¼
   =========================== */
h1, h2, h3, h4, h5, h6 {
  color: var(--text-normal);
}
a {
  color: var(--interactive-accent);
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}
code {
  background-color: var(--code-background);
  color: var(--code-string);
  padding: 2px 4px;
  border-radius: 4px;
}
pre {
  margin: 0;
}
pre code {
  display: block;
  background-color: var(--code-background);
  padding: 1em;
  border-radius: 8px;
  overflow-x: auto;
  white-space: pre-wrap;
  word-break: break-word;
}

blockquote {
  border-left: 2px solid var(--interactive-accent);
  padding-left: 1.5em;
  margin: 0;
  color: var(--text-normal);
}
blockquote p {
  margin: 0;
}
blockquote p:empty {
    margin: 0.5em 0;
}
#preview > blockquote {
   margin: 1em 0;
}

/* ===========================
    Toolbar GUI
   =========================== */
#toolbar {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: var(--background-secondary);
  border-top: 1px solid var(--interactive-accent);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 12px;
  box-sizing: border-box;
  gap: 10px;
}
#cssSnippet {
  width: 45%;
  background: #111;
  color: var(--text-accent);
  font-family: "Fira Code", monospace;
  font-size: 12px;
  border: 1px solid var(--interactive-accent);
  border-radius: 4px;
  padding: 4px;
  resize: vertical;
}
button {
  background: var(--interactive-accent);
  border: none;
  color: white;
  padding: 6px 10px;
  border-radius: 4px;
  cursor: pointer;
}
button:hover {
  background: #8a6eff;
}

/* ===========================
    ì½”ë“œ í•˜ì´ë¼ì´íŒ…
   =========================== */
.hljs-comment { color: var(--code-comment); }
.hljs-keyword { color: var(--code-keyword); }
.hljs-string { color: var(--code-string); }
.hljs-number { color: var(--code-value); }

/* ===========================
    ì¶”ê°€ëœ Markdown ìŠ¤íƒ€ì¼
   =========================== */
mark {
  background-color: #e0de71;
  color: #1e1e1e;
  padding: 2px 4px;
  border-radius: 4px;
}

ul.task-list {
  list-style-type: none;
  padding-left: 0.5em;
}

li.task-list-item {
  display: flex;
  align-items: center;
  margin: 0.2em 0;
}

li.task-list-item::before {
  content: ' ';
  display: inline-block;
  width: 16px;
  height: 16px;
  border: 2px solid var(--text-muted);
  border-radius: 3px;
  margin-right: 0.5em;
  background-color: var(--background-secondary);
  flex-shrink: 0;
}

li.task-list-item.checked::before {
  background-color: var(--interactive-accent);
  border-color: var(--interactive-accent);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)' viewBox='0 0 16 16' fill='white'%3E%3Cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3E%3C/svg%3E");
  background-position: center;
  background-repeat: no-repeat;
}

a.internal-link {
  color: var(--text-accent);
  background-color: #333333;
  padding: 1px 3px;
  border-radius: 4px;
  text-decoration: none;
}

#preview p {
  margin: 0.5em 0;
}
#preview p:first-child {
  margin-top: 0;
}

/* ===========================
   ì½”ë“œ ë³µì‚¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼
   =========================== */
.code-block-wrapper {
  position: relative;
  margin: 1em 0;
}

.copy-code-btn {
  position: absolute;
  top: 8px;
  right: 8px;
  background-color: #3a3a3a;
  color: var(--text-muted);
  border: 1px solid var(--text-muted);
  border-radius: 4px;
  padding: 4px;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.2s;
}

.code-block-wrapper:hover .copy-code-btn {
  opacity: 1;
}

#html-code-view {
  /* ... (other rules) ... */
  white-space: pre-wrap;
  word-break: break-all;
  user-select: text; /* This line was added */
}
    
</style>
</head>

<body>

<textarea id="editor" placeholder="type your Markdown here">
# OBSIDIAN web
---
Obsidian for web browser (unofficial)
<br>

## SUGGESTIONS?
---
If you have any suggestions, please send it to **i.aecopse12@gmail.com**

<br>

>Thank you for your suggestions :)

<br>

## FEATURES
---
1. Obsidian editor in the **WEB**
2. Light/Dark theme switch
3. Auto markdown completer
4. Custom CSS snippet!
5. **export as html!**

Most Of All... It's
**BEAUTIFUL**

<br>


## DONATE
---
If you want to donate, you can send money to
> tossbank 1908-3160-7026 (account no.)
>
Thank you for your help :)

<br>

and, I'm from south korea. so my translation can be missing or wrong sometime... ğŸ˜…
</textarea>

<div id="right-panel">
    <div id="preview"></div>

    <div class="code-block-wrapper" style="height: 40%;">
        <button class="copy-code-btn" id="copy-html-btn" title="Copy HTML">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                <path d="M5.75 1a.75.75 0 0 0-.75.75v1.5h-.75A1.75 1.75 0 0 0 2.5 5v8.25c0 .966.784 1.75 1.75 1.75h5.5A1.75 1.75 0 0 0 11.5 13.25V5A1.75 1.75 0 0 0 9.75 3.25h-.75v-1.5A.75.75 0 0 0 8.25 1h-2.5ZM3.5 5A.25.25 0 0 1 3.75 4.75h5.5a.25.25 0 0 1 .25.25v8.25a.25.25 0 0 1-.25.25h-5.5A.25.25 0 0 1 3.5 13.25V5ZM6 2.5v.75h3V2.5h-3Z"></path>
            </svg>
        </button>
        <pre id="html-code-view"></pre>
    </div>
    </div>

<div id="toolbar">
  <span style="color: var(--text-muted)">ğŸ¨Custom CSS Snippet:</span>
<textarea id="cssSnippet" rows="2" placeholder="ì˜ˆ: body { font-size: 18px;
}">body { --background-primary: black; --interactive-accent: #895FE6;
--text-highlight-bg: #655300}</textarea>
<button id="applyCSS">APPLY</button>
  <button id="toggleTheme">SWITCH THEME</button>
  </div>

<script>
function simpleMarkdown(md) {
    md = md.replace(/\r\n/g, '\n'); 
    
    const codeBlocks = [];

    // 1. (FIXED) ì½”ë“œ ë¸”ë¡ì„ ë¨¼ì € ì¶”ì¶œí•˜ê³  í† í°ìœ¼ë¡œ ëŒ€ì²´
    let html = md.replace(/\n?```([a-z]*)\n([\s\S]*?)```\n?/g, (match, lang, code) => {
        const escapedCode = code.replace(/[<>&]/g, c => ({'<':'&lt;','>':'&gt;','&':'&amp;'}[c]));
        const copyButton = `
            <button class="copy-code-btn" title="Copy code">
                <svg xmlns="[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M5.75 1a.75.75 0 0 0-.75.75v1.5h-.75A1.75 1.75 0 0 0 2.5 5v8.25c0 .966.784 1.75 1.75 1.75h5.5A1.75 1.75 0 0 0 11.5 13.25V5A1.75 1.75 0 0 0 9.75 3.25h-.75v-1.5A.75.75 0 0 0 8.25 1h-2.5ZM3.5 5A.25.25 0 0 1 3.75 4.75h5.5a.25.25 0 0 1 .25.25v8.25a.25.25 0 0 1-.25.25h-5.5A.25.25 0 0 1 3.5 13.25V5ZM6 2.5v.75h3V2.5h-3Z"></path>
                </svg>
            </button>`;
        
        const blockHtml = `\n<div class="code-block-wrapper">${copyButton}<pre><code class="language-${lang}">${escapedCode}</code></pre></div>\n`;
        codeBlocks.push(blockHtml);
        return `\n__CODE_BLOCK_${codeBlocks.length - 1}__\n`;
    });

    // 2. ë‚˜ë¨¸ì§€ ë¸”ë¡ ìš”ì†Œ ì²˜ë¦¬
    html = '\n' + html + '\n';

    // Horizontal Rules
    html = html.replace(/\n(---|\*\*\*)\n/g, "\n<hr>\n");
    
    // Headers (h1-h6)
    html = html.replace(/\n(######) (.*)/g, "\n<h6>$2</h6>")
               .replace(/\n(#####) (.*)/g, "\n<h5>$2</h5>")
               .replace(/\n(####) (.*)/g, "\n<h4>$2</h4>")
               .replace(/\n(###) (.*)/g, "\n<h3>$2</h3>")
               .replace(/\n(##) (.*)/g, "\n<h2>$2</h2>")
               .replace(/\n(#) (.*)/g, "\n<h1>$2</h1>");

    // (FIXED) Blockquotes
    html = html.replace(/\n((?:> ?.*(?:\n|$))+)/g, (match, block) => {
        const content = block.replace(/^> ?/gm, ''); 
        const innerHtml = content.split(/\n\s*\n/)
            .map(paragraph => {
                if (!paragraph.trim()) return '<p></p>';
                const lines = paragraph.split('\n').map(line => line.trim()).join('<br>');
                return `<p>${lines}</p>`;
            })
            .join('');
        return '\n<blockquote>' + innerHtml + '</blockquote>\n';
    });

    // Images
    html = html.replace(/!\[(.*?)\]\((.*?)\)/gim, '<img src="$2" alt="$1" style="max-width: 100%;">');

    // Lists (Task, Unordered, Ordered)
    html = html.replace(/\n- \[(x|X)\] (.*)/g, '\n<li class="task-list-item checked">$2</li>')
               .replace(/\n- \[ \] (.*)/g, '\n<li class="task-list-item">$1</li>')
               .replace(/\n\d+\. (.*)/g, "\n<li class=\"ol-item\">$1</li>")
               .replace(/\n- (.*)/g, "\n<li class=\"ul-item\">$1</li>");

    // List Grouping
    html = html.replace(/((?:\n<li class="ul-item">.*<\/li>)+)/g, "\n<ul>$1\n</ul>")
               .replace(/((?:\n<li class="ol-item">.*<\/li>)+)/g, "\n<ol>$1\n</ol>")
               .replace(/((?:\n<li class="task-list-item.*<\/li>)+)/g, "\n<ul class=\"task-list\">$1\n</ul>");
    
    // 3. (FIXED) ë‹¨ë½(<p>) ë° ì¸ë¼ì¸ ìš”ì†Œ ì²˜ë¦¬
    html = html.split('\n').map(line => {
        const trimmed = line.trim();
        if (trimmed === "") return "";
        
        if (/^__CODE_BLOCK_/.test(trimmed) || /^<(h[1-6]|ul|ol|li|pre|code|blockquote|hr|img|div)/.test(trimmed) || /^<\/(ul|ol|blockquote)>$/.test(trimmed)) {
            return line; 
        }
        
        line = line.replace(/\[(.*?)\]\((.*?)\)/gim, '<a href="$2" target="_blank">$1</a>')
                   .replace(/\[\[(.*?)\]\]/g, '<a href="#" class="internal-link">$1</a>')
                   .replace(/` + '`(.*?)`' + `/gim, '<code>$1</code>')
                   .replace(/~~(.*?)~~/gim, "<s>$1</s>")
                   .replace(/==(.*?)==/gim, "<mark>$1</mark>")
                   .replace(/\*\*(.*?)\*\*/gim, "<b>$1</b>")
                   .replace(/\*(.*?)\*/gim, "<i>$1</i>");
                   
        return `<p>${line}</p>`;
    }).join('\n');
    
    // 4. (FIXED) ì½”ë“œ ë¸”ë¡ í† í°ì„ ë‹¤ì‹œ HTMLë¡œ ë³µì›
    html = html.replace(/<p>__CODE_BLOCK_(\d+)__<\/p>|__CODE_BLOCK_(\d+)__/g, (match, p1, p2) => {
        const index = p1 || p2;
        return codeBlocks[index];
    });

    // 5. Cleanup
    html = html.replace(/<p> <\/p>/g, '')
               .replace(/<p><\/p>/g, '')
               .replace(/\n/g, '');

    return html.trim();
}
</script>

<script>
function highlightCode() {
  document.querySelectorAll('pre code').forEach(block => {
    if (block.querySelector('span.hljs-keyword')) {
        return;
    }
    
    block.innerHTML = block.innerHTML
      .replace(/("[^"]*"|'[^']*')/g, '<span class="hljs-string">$1</span>')
      .replace(/(def|class|return|import|from|if|else|for|while|print)/g, '<span class="hljs-keyword">$1</span>')
      .replace(/(#.*$)/gm, '<span class="hljs-comment">$1</span>')
      .replace(/(\d+)/g, '<span class="hljs-number">$1</span>');
  });
}
</script>

<script>
const editor = document.getElementById('editor');
const preview = document.getElementById('preview');
const htmlView = document.getElementById('html-code-view'); // (NEW)
const cssSnippet = document.getElementById('cssSnippet');
const applyBtn = document.getElementById('applyCSS');
const toggleBtn = document.getElementById('toggleTheme');
// (REMOVED) exportBtn, copyBtn

// ===================================
//  ìŠ¤ë§ˆíŠ¸ ì—ë””í„° ê¸°ëŠ¥
// ===================================
editor.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
        this.value = this.value.replace(/\r\n/g, '\n');
    }

    const start = this.selectionStart;
    const end = this.selectionEnd;
    const text = this.value;

    // 1. ê´„í˜¸, ë”°ì˜´í‘œ, ë°±í‹± ìë™ ì™„ì„±
    const pairs = { '(': ')', '[': ']', '{': '}', '"': '"', "'": "'", '`': '`' };

    if (pairs[e.key]) {
        e.preventDefault();
        const before = text.substring(0, start);
        const after = text.substring(end);
        
        if (start !== end) {
            const selected = text.substring(start, end);
            this.value = before + e.key + selected + pairs[e.key] + after;
            this.setSelectionRange(start + 1, end + 1);
        } else {
            this.value = before + e.key + pairs[e.key] + after;
            this.setSelectionRange(start + 1, start + 1);
        }
        renderMarkdown();
        return;
    }

    // 2. Enter í‚¤ë¡œ ëª©ë¡/ì¸ìš©ë¬¸ ìë™ ì™„ì„± ë° í•´ì œ
    if (e.key === 'Enter') {
        const before = text.substring(0, start);
        const lastNewline = before.lastIndexOf('\n');
        const currentLine = before.substring(lastNewline + 1);

        const listMatch = currentLine.match(/^(\s*)((?:>|[-*]|\d+\.) )/);

        if (listMatch) {
            e.preventDefault();
            const prefix = listMatch[1]; 
            const bullet = listMatch[2]; 

            if (currentLine.trim() === bullet.trim()) {
                this.value = text.substring(0, lastNewline + 1) + text.substring(start);
                this.setSelectionRange(lastNewline + 1, lastNewline + 1);
            } else {
                let newBullet = bullet;
                if (/\d+\./.test(bullet)) {
                    const num = parseInt(bullet, 10);
                    newBullet = (num + 1) + '. ';
                }
                const newLine = '\n' + prefix + newBullet;
                this.value = before + newLine + text.substring(start);
                this.setSelectionRange(start + newLine.length, start + newLine.length);
            }
        } else {
            e.preventDefault();
            this.value = before + '\n' + text.substring(start);
            this.setSelectionRange(start + 1, start + 1);
        }
        renderMarkdown();
        return;
    }
});

// ===================================
//  ì½”ë“œ ë³µì‚¬ ë²„íŠ¼ ê¸°ëŠ¥ (ë¯¸ë¦¬ë³´ê¸° íŒ¨ë„)
// ===================================
preview.addEventListener('click', function(e) {
    // (FIXED) #copy-html-btnì´ ì•„ë‹Œ ë²„íŠ¼ë§Œ ì„ íƒ
    const btn = e.target.closest('.copy-code-btn:not(#copy-html-btn)'); 
    if (btn) {
        e.preventDefault();
        const code = btn.nextElementSibling.querySelector('code').innerText;
        
        navigator.clipboard.writeText(code).then(() => {
            btn.title = "Copied!";
            btn.style.color = "var(--code-string)";
            setTimeout(() => { 
                btn.title = "Copy code"; 
                btn.style.color = "var(--text-muted)";
            }, 2000);
        }).catch(err => {
            console.error('Failed to copy code:', err);
            btn.title = "Failed to copy";
        });
    }
});

// ===================================
//  HTML ì½”ë“œ ë³µì‚¬ ë²„íŠ¼ ê¸°ëŠ¥ (FIXED - ë¶„ë¦¬ë¨)
// ===================================
document.getElementById('copy-html-btn').addEventListener('click', function(e) {
    const btn = e.currentTarget; // í´ë¦­ëœ ë²„íŠ¼ (this)
    const htmlContent = document.getElementById('html-code-view').textContent;

    navigator.clipboard.writeText(htmlContent).then(() => {
        btn.title = "Copied!";
        btn.style.color = "var(--code-string)"; // í”¼ë“œë°± ìŠ¤íƒ€ì¼ ì¬ì‚¬ìš©
        setTimeout(() => { 
            btn.title = "Copy HTML"; 
            btn.style.color = "var(--text-muted)";
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy HTML:', err);
        btn.title = "Failed to copy";
    });
});


// Markdown ë Œë”ë§ (FIXED)
function renderMarkdown() {
  // 1. ë§ˆí¬ë‹¤ìš´ì„ HTML ì¡°ê°ìœ¼ë¡œ ë³€í™˜
  const bodyHtml = simpleMarkdown(editor.value);
  
  // 2. ìƒë‹¨ ë¯¸ë¦¬ë³´ê¸°(preview) íŒ¨ë„ì€ ê·¸ëŒ€ë¡œ HTML ì¡°ê°ìœ¼ë¡œ ì±„ì›€
  preview.innerHTML = bodyHtml;

  // 3. (NEW) í•˜ë‹¨ HTML ì½”ë“œ ë·°ë¥¼ ìœ„í•œ ì‘ì—…
  // 3-1. ë©”ì¸ ìŠ¤íƒ€ì¼ ì‹œíŠ¸ ë‚´ìš©ì„ 'ì•ˆì „í•˜ê²Œ' ê°€ì ¸ì˜´
  const mainStylesEl = document.getElementById('main-obsidian-styles');
  const mainStyles = mainStylesEl ? mainStylesEl.textContent : '/* ğŸ¨ ë©”ì¸ ìŠ¤íƒ€ì¼ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤ */';
  
  // 3-2. ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì»¤ìŠ¤í…€ CSS ìŠ¤ë‹ˆí«ì„ ê°€ì ¸ì˜´
  const customStyles = cssSnippet.value;

  // 3-3. í˜„ì¬ í…Œë§ˆ(ë¼ì´íŠ¸ ëª¨ë“œ) ìƒíƒœë¥¼ í™•ì¸
  const isLightMode = document.body.classList.contains('light-mode');
  const bodyClass = isLightMode ? ' class="light-mode"' : '';

  // 3-4. (FIXED) ì™„ì „í•œ HTML ë¬¸ì„œ í…œí”Œë¦¿ì„ ìƒì„± (ë ˆì´ì•„ì›ƒ ì˜¤ë²„ë¼ì´ë“œ í¬í•¨)
  const fullHtmlOutput = `<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown Export</title>

  <style id="main-obsidian-styles">
${mainStyles}
  </style>

  <style id="custom-snippet-styles">
${customStyles}
  </style>

  <style>
    /* ì—ë””í„°ì˜ flex ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼('display: flex')ì´
      ê²°ê³¼ë¬¼ íŒŒì¼ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ì´ˆê¸°í™”(override)í•©ë‹ˆë‹¤.
    */
    body {
      display: block; /* 'flex'ì—ì„œ 'block'ìœ¼ë¡œ ë³€ê²½ */
      flex-direction: unset;
      height: auto;
      overflow: auto;
    }
  </style>

</head>
<body${bodyClass}>

  <div id="preview-wrapper" style="max-width: 800px; margin: 2em auto; padding: 2em;">
${bodyHtml}
  </div>
  </body>
</html>`;

  // 4. í•˜ë‹¨ HTML ë·°(htmlView)ì— 'í…ìŠ¤íŠ¸'ë¡œ ì‚½ì…
  htmlView.textContent = fullHtmlOutput; 

  // 5. ê¸°íƒ€ ê¸°ëŠ¥ ìˆ˜í–‰
  highlightCode(); // ìƒë‹¨ ë¯¸ë¦¬ë³´ê¸° í•˜ì´ë¼ì´íŒ…
  localStorage.setItem('obsidian-md', editor.value);
}

// ë¡œì»¬ ì €ì¥ ë¶ˆëŸ¬ì˜¤ê¸°
window.addEventListener('load', () => {
  const saved = localStorage.getItem('obsidian-md');
  if (saved) editor.value = saved;

  // [ìˆ˜ì •] ê¸°ë³¸ CSS ìŠ¤ë‹ˆí«ì„ ë¡œë“œ ì‹œ ì¦‰ì‹œ ì ìš©í•©ë‹ˆë‹¤.
  applyBtn.click(); 
  
  renderMarkdown();
});

// ì…ë ¥ ì‹œ ì¦‰ì‹œ ë Œë”ë§ + ì €ì¥
editor.addEventListener('input', renderMarkdown);

// CSS ìŠ¤ë‹ˆí« ì ìš©
applyBtn.addEventListener('click', () => {
  let styleTag = document.getElementById('customCSS');
  if (!styleTag) {
      styleTag = document.createElement('style');
      styleTag.id = 'customCSS';
      document.head.appendChild(styleTag);
  }
  styleTag.textContent = cssSnippet.value;
});

// í…Œë§ˆ ì „í™˜
toggleBtn.addEventListener('click', () => {
  document.body.classList.toggle('light-mode');
  renderMarkdown(); 
});

// (REMOVED) ë‚´ë³´ë‚´ê¸° ë° ë³µì‚¬ ë²„íŠ¼ ë¦¬ìŠ¤ë„ˆ ì œê±°
// made by ACOPS1206 aecopse12@gmail.com
</script>


</body>
</html>
